From 50939165193f063f9bcbbb15024b1a21bc56e20c Mon Sep 17 00:00:00 2001
From: Srinivas Pandruvada <srinivas.pandruvada@linux.intel.com>
Date: Tue, 11 Mar 2014 15:49:57 -0700
Subject: [PATCH 29/33] coverity scans: Uninitialized scalar field errors

Addressed uninitialized scalar field errors.
---
 src/thd_engine.cpp    |  1 +
 src/thd_kobj_uevent.h |  8 +++++++-
 src/thd_model.cpp     | 14 ++++++--------
 3 files changed, 14 insertions(+), 9 deletions(-)

diff --git a/src/thd_engine.cpp b/src/thd_engine.cpp
index 0db9138..63701ea 100644
--- a/src/thd_engine.cpp
+++ b/src/thd_engine.cpp
@@ -53,6 +53,7 @@ cthd_engine::cthd_engine() :
 	thd_attr = pthread_attr_t();
 	thd_cond_var = pthread_cond_t();
 	thd_cond_mutex = pthread_mutex_t();
+	memset(poll_fds, 0, sizeof(poll_fds));
 }
 
 cthd_engine::~cthd_engine() {
diff --git a/src/thd_kobj_uevent.h b/src/thd_kobj_uevent.h
index e13d263..d30ea5c 100644
--- a/src/thd_kobj_uevent.h
+++ b/src/thd_kobj_uevent.h
@@ -45,10 +45,16 @@ private:
 	char device_path[max_buffer_size];
 
 public:
+	cthd_kobj_uevent() {
+		fd = 0;
+		memset(&nls, 0, sizeof(nls));
+		device_path[0] = '\0';
+	}
 	int kobj_uevent_open();
 	void kobj_uevent_close();
 	void register_dev_path(char *path);
 	bool check_for_event();
-};
+}
+;
 
 #endif
diff --git a/src/thd_model.cpp b/src/thd_model.cpp
index 8820386..cbce043 100644
--- a/src/thd_model.cpp
+++ b/src/thd_model.cpp
@@ -45,14 +45,12 @@ cthd_model::cthd_model(std::string _zone_type, bool use_pid) :
 				0), set_point_reached(false), delay_cnt(0), max_temp_seen(
 				false), updated_set_point(false), use_pid_param(use_pid), set_point_delay_start(
 				0), user_forced_set_point_change(false) {
-	if (use_pid) {
-		// set default pid parameters
-		kp = 0.5;
-		ki = kd = 0.0001;
-		last_time = 0;
-		err_sum = 0.0;
-		last_err = 0.0;
-	}
+	// set default pid parameters
+	kp = 0.5;
+	ki = kd = 0.0001;
+	last_time = 0;
+	err_sum = 0.0;
+	last_err = 0.0;
 }
 
 unsigned int cthd_model::update_set_point(unsigned int curr_temp) {
-- 
1.9.0

